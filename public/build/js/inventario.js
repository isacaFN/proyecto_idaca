let url,arrayProductosCopia=[];function iniciarapp(){url="http://localhost/proyecto_idaca/public/api/productos",consultarAPI(url)}async function consultarAPI(o){try{const n=await fetch(o),a=await n.json();arrayProductosCopia=a.map((o=>({...o})))}catch(o){console.log(o)}}function agregarInventario(){let o="";arrayProductosCopia.forEach((n=>{o+=`<option value="${n.codproducto}">${n.nomprod}</option>`}));let n=`\n    <div class="contendor-modal">\n        <div class="modal"> \n            <h3>Agregar inventario</h3>\n            <p>Selecciona un producto e ingresa la cantidad para sumarlo al inventario</p>\n            <form class="formulario-inventario">\n                <div class="detalles_inventario">\n                    <label for="codproducto">Selecciona un producto:</label>\n                    <select name="codproducto" id="codproducto" required>\n                        ${o} \n                    </select>\n                    <label for="cantactual">Cantidad:</label>\n                    <input type="number" name="cantactual" id="cantactual" required>\n                </div>\n                <input class="boton_verde" type="submit" value="Agregar">\n            </form>\n        </div>\n    </div>\n    `;document.getElementById("modal-datos").innerHTML=n;const a=document.querySelector(".contendor-modal");a.addEventListener("click",(function(o){o.target===a&&a.remove()}));const e=document.querySelector(".formulario-inventario");e.addEventListener("submit",(function(o){o.preventDefault();const n=new FormData(e);fetch("inventario",{method:"POST",body:n}).then((o=>o.json())).then((o=>{o.success?(alert(o.message),location.reload()):alert(o.message)})).catch((o=>{console.error("Error:",o),alert("Hubo un error al procesar la solicitud")}))}))}document.addEventListener("DOMContentLoaded",(function(){iniciarapp()})),window.agregarInventario=agregarInventario;