function iniciarapp(){consultarAPI()}async function consultarAPI(){try{const t="http://localhost/proyecto_idaca/public/api/ventas",e=await fetch(t);mostrarventas(await e.json())}catch(t){console.log(t)}}function mostrarventas(t){t.forEach((t=>{const{numventa:e,fecha:n,totalpagar:a,totalkg:o,idcliente:d,tipoventa:c,pdf:l}=t,i=new Intl.NumberFormat("es-ES").format(a.replace(/\./g,"").replace(",",".")),s=document.createElement("tr");s.classList.add("tr"),s.id=e,s.classList.add("detalleventas");const r=document.createElement("td");r.textContent=e;const p=document.createElement("td");p.textContent=n;const h=document.createElement("td");h.textContent=d;const u=document.createElement("td");u.textContent=o;const m=document.createElement("td");m.textContent=i;const v=document.createElement("td");v.textContent=c;const f=document.createElement("td");f.classList.add("accionesventa"),f.innerHTML=`<div> <a href="detalleventa?numventa=${e}" title="Mostar detalles de venta" class="detalleventa">\n        <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="1.5"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-file-description">\n        <path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" />\n        <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" />\n        <path d="M9 17h6" /><path d="M9 13h6" /></svg> </a> </div>\n        <div data-pdf="${l}" class="iconoDescargarPdf"><a title="descargar pdf"><svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="1.5"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-download">\n        <path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg> </a></div>`,s.appendChild(r),s.appendChild(p),s.appendChild(h),s.appendChild(u),s.appendChild(m),s.appendChild(v),s.appendChild(f),document.getElementById("Ventas").appendChild(s)})),document.querySelectorAll(".iconoDescargarPdf").forEach((t=>{t.addEventListener("click",(function(){const t=this.getAttribute("data-pdf").replace(/\s+/g,"");console.log("distes click");const e=document.createElement("a");e.href=t,e.download=t.split("/").pop(),document.body.appendChild(e),e.click(),document.body.removeChild(e)}))}))}document.addEventListener("DOMContentLoaded",(function(){iniciarapp()}));